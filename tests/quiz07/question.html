<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒì‹ ì…ë¬¸ - ì§ˆë¬¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../../css/question.css">
</head>
<body class="bg-gradient-to-br from-slate-100 to-blue-50 min-h-screen">
    <!-- ì§„í–‰ë°” -->
    <div class="fixed top-0 left-0 w-full h-2 bg-gray-800 z-50">
        <div id="progress" class="progress-bar h-full cyber-gradient" style="width: 0%"></div>
    </div>

    <!-- ì§ˆë¬¸ ì»¨í…Œì´ë„ˆ -->
   <div class="min-h-screen flex items-center justify-center px-4 py-20">
    <div id="questionContainer" class="question-container w-full max-w-2xl">            
        <div class="bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-xl mb-8 neon-border">
            <h2 id="questionText" class="text-xl md:text-2xl font-bold text-center mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                ì§ˆë¬¸ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤
            </h2>
            <p id="questionContext" class="text-center text-gray-600 text-sm md:text-base">
                ë¶€ê°€ì„¤ëª…ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤
            </p>
            </div>

            <!-- ë‹µë³€ ë²„íŠ¼ë“¤ -->
                    <div class="space-y-3">
            <button class="answer-btn w-full p-5 rounded-xl border-2 border-transparent hover:border-purple-500 transition-all duration-300 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 text-white font-bold shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                <div class="flex items-center space-x-3">
                    <span class="text-xl">âœ¨</span>
                    <span class="flex-1 text-left">ë§¤ìš° ê·¸ë ‡ë‹¤</span>
                </div>
            </button>

            <button class="answer-btn w-full p-5 rounded-xl border-2 border-transparent hover:border-purple-500 transition-all duration-300 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white font-bold shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                <div class="flex items-center space-x-3">
                    <span class="text-xl">ğŸ’«</span>
                    <span class="flex-1 text-left">ê·¸ë ‡ë‹¤</span>
                </div>
            </button>

            <button class="answer-btn w-full p-5 rounded-xl border-2 border-transparent hover:border-purple-500 transition-all duration-300 bg-gradient-to-r from-purple-500 via-pink-500 to-rose-500 text-white font-bold shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                <div class="flex items-center space-x-3">
                    <span class="text-xl">â­</span>
                    <span class="flex-1 text-left">ë³´í†µì´ë‹¤</span>
                </div>
            </button>

            <button class="answer-btn w-full p-5 rounded-xl border-2 border-transparent hover:border-purple-500 transition-all duration-300 bg-gradient-to-r from-pink-500 via-rose-500 to-orange-500 text-white font-bold shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                <div class="flex items-center space-x-3">
                    <span class="text-xl">ğŸŒŸ</span>
                    <span class="flex-1 text-left">ì•„ë‹ˆë‹¤</span>
                </div>
            </button>

            <button class="answer-btn w-full p-5 rounded-xl border-2 border-transparent hover:border-purple-500 transition-all duration-300 bg-gradient-to-r from-rose-500 via-orange-500 to-amber-500 text-white font-bold shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                <div class="flex items-center space-x-3">
                    <span class="text-xl">â˜€ï¸</span>
                    <span class="flex-1 text-left">ì „í˜€ ì•„ë‹ˆë‹¤</span>
                </div>
            </button>
        </div>

            <!-- ì •ë‹µ ë° ì ìˆ˜ í‘œì‹œ -->
            <div id="answer-feedback" class="hidden mt-4">
                <p id="correct-answer" class="correct-answer"></p>
                <p id="current-score" class="current-score"></p>
            </div>

            <!-- ë‹¤ìŒ ë²„íŠ¼ -->
            <button id="next-button" class="hidden mt-4 w-full p-5 rounded-xl border-2 border-transparent transition-all duration-300 bg-gradient-to-r from-green-500 to-blue-500 text-white font-bold shadow-lg hover:shadow-xl transform hover:-translate-y-1" onclick="nextQuestion()">ë‹¤ìŒ</button>
        </div>
    </div>

    <script type="module">
        import quizDataSets from './quizDataSets.js';

        const currentQuiz = quizDataSets.set7;
        let currentQuestionIndex = 0;
        let score = 0;

        const questionContainer = document.getElementById('questionContainer');
        const questionText = document.getElementById('questionText');
        const questionContext = document.getElementById('questionContext');
        const progress = document.getElementById('progress');
        const answerButtons = document.querySelectorAll('.answer-btn');
        const answerFeedback = document.getElementById('answer-feedback');
        const correctAnswerElement = document.getElementById('correct-answer');
        const currentScoreElement = document.getElementById('current-score');
        const nextButton = document.getElementById('next-button');

        function loadQuestion() {
            const currentQuestion = currentQuiz.questions[currentQuestionIndex];

            // Reset animation
            questionContainer.style.animation = 'none';
            questionContainer.offsetHeight; // Trigger reflow
            questionContainer.style.animation = null;

            // Update question text and context
            questionText.textContent = currentQuestion.question;
            questionContext.textContent = currentQuestion.context || ''; // Update if you have context

            // Update progress bar
            const progressPercentage = (currentQuestionIndex / currentQuiz.questions.length) * 100;
            progress.style.width = `${progressPercentage}%`;

            // Hide answer feedback and next button
            answerFeedback.classList.add('hidden');
            nextButton.classList.add('hidden');

            // Enable answer buttons
            answerButtons.forEach(button => {
                button.disabled = false;
                button.classList.remove('selected');
            });

            // Apply slide-in animation
            questionContainer.style.animation = 'slideIn 0.5s ease-out';
        }

        function handleAnswer(isCorrect) {
            // Disable answer buttons
            answerButtons.forEach(button => {
                button.disabled = true;
                button.classList.add('selected');
            });

            // Update score if the answer is correct
            if (isCorrect) {
                score++;
            }

            // Show correct answer and current score
            const currentQuestion = currentQuiz.questions[currentQuestionIndex];
            correctAnswerElement.textContent = `ì •ë‹µ: ${currentQuestion.correct}`;
            currentScoreElement.textContent = `í˜„ì¬ ì ìˆ˜: ${score} / ${currentQuiz.questions.length}`;
            answerFeedback.classList.remove('hidden');

            // Show next button
            nextButton.classList.remove('hidden');
        }

        function nextQuestion() {
            currentQuestionIndex++;

            if (currentQuestionIndex < currentQuiz.questions.length) {
                loadQuestion();
            } else {
                // í€´ì¦ˆ ì¢…ë£Œ, ì ìˆ˜ ì €ì¥ ë° ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™
                localStorage.setItem('userScore', score);
                window.location.href = './result.html';
            }
        }

        // Attach event listeners to answer buttons
        answerButtons.forEach((button, index) => {
            button.addEventListener('click', () => {
                const currentQuestion = currentQuiz.questions[currentQuestionIndex];
                const isCorrect = (button.querySelector('span.flex-1').textContent === currentQuestion.correct);
                handleAnswer(isCorrect);
            });
        });

        // Load the first question
        loadQuestion();
    </script>
</body>
</html>
