<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>상식 퀴즈 챌린지 결과</title>
    <meta name="description" content="나의 상식 퀴즈 결과는?">
    <meta name="keywords" content="상식,퀴즈,테스트">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .gradient-text {
            background: linear-gradient(45deg, #9333EA, #EC4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .result-card {
            animation: fadeIn 1s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .button-hover {
            transition: all 0.3s ease;
        }
        .button-hover:hover {
            transform: translateY(-2px);
        }
        .planner-button {
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 to-pink-50 min-h-screen pb-32">
    <div class="max-w-lg mx-auto px-4 py-8">
        <!-- 결과 카드 -->
        <div class="result-card bg-white rounded-2xl shadow-lg p-6 mb-8">
            <h1 class="text-2xl font-bold text-center gradient-text mb-4 result-title"></h1>
            <p class="text-lg text-center text-purple-800 mb-6 result-subtitle"></p>

            <!-- 공감 지수 표시 -->
            <div class="flex justify-center items-center mb-8">
                <div class="w-32 h-32 rounded-full border-8 border-purple-200 flex items-center justify-center">
                    <span class="text-3xl font-bold text-purple-600 success-rate"></span>
                </div>
            </div>

            <!-- 차트 이미지 -->
            <div class="flex justify-center mb-8">
                <img src="" alt="퀴즈 차트" class="chart-image w-full max-w-sm rounded-lg shadow-md">
            </div>

            <!-- 키워드 섹션 -->
            <div class="flex flex-wrap justify-center gap-2 mb-6 keywords"></div>

            <!-- 결과 설명 -->
            <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 mb-6">
                <h3 class="font-bold text-purple-800 mb-3">💫 당신의 상식 스타일</h3>
                <p class="text-purple-700 mb-4 description"></p>
                <h3 class="font-bold text-purple-800 mb-3">✨ 상식 능력 상승을 위한 조언</h3>
                <p class="text-purple-700 advice"></p>
            </div>

            <!-- CTA 섹션 -->
            <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 mb-6">
                <h3 class="font-bold text-purple-800 mb-3">✨ 상세 분석 결과</h3>
                <div class="space-y-2 text-purple-900">
                    <p>🎯 지식 수준: <span class="blur-sm">비공개</span></p>
                    <p>💫 이해력: <span class="blur-sm">비공개</span></p>
                    <p>✨ 응용력: <span class="blur-sm">비공개</span></p>
                </div>
                
                <button onclick="showFullAnalysis()" 
                        class="w-full mt-4 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 animate-pulse">
                    상세 분석 결과 보기 (무료)
                </button>
            </div>

            <!-- 버킷리스트 플래너 추천 -->
            <div class="bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6 mb-6">
                <h3 class="font-bold text-purple-800 mb-2">🎯 추천 도구</h3>
                <p class="text-purple-700 mb-4">상식 능력을 키우기 위한 무료 플래너를 받아보세요!</p>
                <a href="https://coffeemania68.github.io/share/" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   class="planner-button block w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-bold text-center shadow-lg hover:shadow-xl transition-all duration-300">
                    2025 버킷리스트 플래너 받기 ✨
                </a>
            </div>
        </div>
    </div>

    <!-- 고정된 하단 버튼 -->
    <div class="fixed bottom-0 left-0 right-0 bg-white shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]">
        <div class="max-w-lg mx-auto p-4 grid grid-cols-2 gap-3">
            <button onclick="location.href='./'" class="button-hover w-full py-3 px-6 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full font-medium shadow-md hover:opacity-90">
               다시 도전! 🔄
            </button>
            <button onclick="location.href='https://coffeemania68.github.io/fortune-2025/'" class="button-hover w-full py-3 px-6 bg-gray-100 text-gray-700 rounded-full font-medium hover:bg-gray-200">
                다른 테스트 하기
            </button>
        </div>
    </div>
    <script>
         const results = [
            {
                title: "상식 천재 (90-100점)",
                subtitle: "당신은 모든 것을 꿰뚫고 있는 지식의 신! 🏆",
                successRate: "99%",
                chartImage: "https://blog.kakaocdn.net/dn/bAymPL/btsLFhWZnAq/jFQgneAkWRhVYvrEGKDYmk/img.jpg",
                keywords: ["지식왕", "상식 천재", "뇌섹남/뇌섹녀"],
                description: "당신은 뛰어난 지식과 상식을 겸비한 진정한 천재입니다. 어떤 질문에도 막힘없이 답할 수 있는 능력을 가지고 있습니다.",
                advice: "✨ 당신의 지식은 이미 완벽합니다! 꾸준히 지식을 탐구하고, 다른 사람들에게도 지식을 나눠주세요."
            },
            {
                title: "상식 마스터 (70-89점)",
                subtitle: "지식 탐험의 베테랑! 📚",
                successRate: "85%",
                chartImage: "https://blog.kakaocdn.net/dn/meEa1/btsLFExCUzR/QBJXO6n2HuIWf3ppdKEA60/img.webp",
                keywords: ["지식 탐험가", "상식 전문가", "학습 능력자"],
                 description: "당신은 지식 탐험에 능숙한 베테랑입니다. 다양한 분야에 대한 지식을 갖추고 있으며, 새로운 지식을 습득하는 것을 즐깁니다.",
                advice: "🌊 당신의 지식은 매우 훌륭합니다! 꾸준히 학습을 이어가고, 자신감을 가지세요."
            },
            {
                title: "상식 루키 (50-69점)",
                subtitle: "지식 성장의 가능성! 🌱",
                successRate: "65%",
                chartImage: "https://blog.kakaocdn.net/dn/cLZls9/btsLFZ9jsjs/zK0nbtJ5LlaxfChjVOIZo0/img.jpg",
                keywords: ["지식 러너", "상식 팔로워", "성장형"],
                description: "MZ 문화에 적극적으로 적응하려 노력하는 당신! 아직은 어색하지만, 빠르게 성장하고 있는 중입니다.",
                advice: "💫 조금만 더 SNS 활동을 늘려보세요. 곧 진정한 MZ가 될 거예요!"
            },
            {
                title: "상식 뉴비 (30-49점)",
                subtitle: "상식의 세계에 입문! 🌟",
                successRate: "45%",
                 chartImage: "https://blog.kakaocdn.net/dn/bbyl6h/btsLGdMPbmt/W9fsg5DKqfbNDG8k3ESYVK/img.jpg",
                keywords: ["관찰자", "신입생", "도전중"],
                description: "MZ 문화가 아직은 낯설지만, 관심을 가지고 배우려는 자세가 멋져요! 챌린지나 밈을 이해하려 노력하는 당신, 이미 절반은 성공했습니다.",
                advice: "🌟 틱톡이나 릴스부터 시작해보세요. 재미있는 MZ 세계가 기다리고 있어요!"
            },
            {
                title: "아재 감성 (0-29점)",
                subtitle: "레트로는 트렌드가 될 수 있어요! 🎸",
                successRate: "25%",
                chartImage: "https://blog.kakaocdn.net/dn/dgzo1m/btsLHmoUquy/LKYBjnYvqyyXNuSAGbukck/img.png",
                keywords: ["클래식", "아재력MAX", "레트로"],
                description: "요즘 것들이 하는 게 영 낯설고 어색하신가요? 괜찮아요! 아재 감성도 새로운 트렌드가 될 수 있답니다. Y2K가 다시 유행하는 것처럼요!",
                advice: "💝 MZ들이 오히려 당신의 감성을 찾고 있을지도 몰라요. 레트로는 영원한 트렌드니까요!"
            }
         ];

       function getResultIndex(score) {
            if (score >= 90) return 0;
            if (score >= 70) return 1;
            if (score >= 50) return 2;
            if (score >= 30) return 3;
            return 4;
        }
      
      function displayResult() {
            const urlParams = new URLSearchParams(window.location.search);
            const score = parseInt(urlParams.get('score'));
            const resultIndex = getResultIndex(score);
            const result = results[resultIndex];

            document.querySelector('.result-title').textContent = result.title;
            document.querySelector('.result-subtitle').textContent = result.subtitle;
             document.querySelector('.success-rate').textContent = `${score}점`; 
            document.querySelector('.chart-image').src = result.chartImage;
            
            const keywordHtml = result.keywords.map(keyword => 
                `<span class="px-4 py-2 bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 rounded-full text-sm font-medium">${keyword}</span>`
            ).join('');
            document.querySelector('.keywords').innerHTML = keywordHtml;

            document.querySelector('.description').textContent = result.description;
            document.querySelector('.advice').textContent = result.advice;

            showRank(score);
                
             const nextLevelButton = document.createElement('button');
            nextLevelButton.className = "w-full mt-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-bold text-center shadow-lg hover:shadow-xl transition-all duration-300";
    
            const currentLevel = parseInt(urlParams.get('set')) || 1;
             if (score >= 70) {
                const nextLevel = currentLevel + 1;
                  if (nextLevel <= 6) {
                      nextLevelButton.textContent = "다음 레벨 도전하기 →";
                      nextLevelButton.onclick = function() {
                        window.location.href = `../quiz-app-0${nextLevel}/quiz-question.html?set=${nextLevel}`
                    }
                  } else {
                   nextLevelButton.textContent = "🎉 모든 레벨 클리어!";
                      nextLevelButton.onclick = function() {
                       alert('축하합니다! 모든 레벨을 클리어 하셨습니다!')
                    }
                }
            } else {
             nextLevelButton.textContent = "다시 도전하기 ↺";
                  nextLevelButton.onclick = function() {
                      window.location.href = './'
                  }
        }
             document.querySelector('.result-card').appendChild(nextLevelButton);
        }
       function showRank(score) {
            let scoresData = JSON.parse(localStorage.getItem('quizScores') || '[]');
            scoresData.sort((a, b) => b.score - a.score);
            const userIndex = scoresData.findIndex(item => item.score === score);
            const rank = userIndex + 1;
            const totalUsers = scoresData.length;
            const percentage = totalUsers > 0 ? Math.round((rank / totalUsers) * 100) : 0;
    
           const rankTextElement = document.createElement('p');
           rankTextElement.className = "text-lg mb-4 text-center";
            let message = "";

              if (percentage <= 10) {
                message = "와우! 당신은 상위 10% 안에 드는 천재군요! 이대로만 쭉 가세요!";
            } else if (percentage <= 30) {
               message = "당신은 상위 30% 안에 들었어요! 정말 대단하네요! 다음 레벨도 도전해 보세요!";
            } else if (percentage <= 50) {
                message = "당신은 상위 50% 안에 들었어요! 훌륭해요! 조금만 더 노력하면 더 높은 등수를 얻을 수 있을 거예요!";
            } else if (percentage <= 70) {
                 message = "당신은 상위 70% 안에 들었어요! 멋져요! 계속해서 노력하면 더 좋은 결과를 얻을 수 있을 거예요.";
            }
            else if (percentage <= 90) {
              message = "아쉽지만 당신은 상위 90% 안에 들었어요! 다음 테스트에서 만회해 보세요!";
            }
            else  {
                 message = "괜찮아요! 다음 테스트에서 만회해 보세요!";
            }
              
              rankTextElement.innerHTML = `
                  <div class="text-center">
                    <div class="font-bold text-xl mb-2">🏆 ${rank}등</div>
                      <div class="text-sm text-gray-600">전체 ${totalUsers}명 중</div>
                     <div class="text-lg text-purple-600 mt-2">${message}</div>
                   </div>
               `;
               document.querySelector(".success-rate").textContent = "";
              document.querySelector('.result-card').insertBefore(rankTextElement,document.querySelector('.chart-image'));
        }


             function showFullAnalysis() {
       document.querySelectorAll('.blur-sm').forEach(el => {
           el.classList.remove('blur-sm');
           
            const parentText = el.parentElement.textContent.trim();
           const score = parseInt(new URLSearchParams(window.location.search).get('score'));
           let imageUrl = "";
          if (score >= 90) {
            imageUrl = imageUrls.badgeImages["상식 천재"];
             if (parentText.startsWith('🎯')) {
               el.textContent = '지식 선도자급';
            } else if (parentText.startsWith('💫')) {
                  el.textContent = '이해력 만렙';
            } else if (parentText.startsWith('✨')) {
               el.textContent = '응용력 천재';
            }
        } else if (score >= 70) {
               imageUrl = imageUrls.badgeImages["상식 마스터"];
              if (parentText.startsWith('🎯')) {
                   el.textContent = '상식 전문가';
                } else if (parentText.startsWith('💫')) {
                   el.textContent = '지식 활용력 만렙';
               } else if (parentText.startsWith('✨')) {
                    el.textContent = '상식 응용력 프로';
               }
           }else if (score >= 50) {
                imageUrl = imageUrls.badgeImages["상식 루키"];
               if (parentText.startsWith('🎯')) {
                    el.textContent = '지식 습득 중';
                } else if (parentText.startsWith('💫')) {
                   el.textContent = '이해력 수련 중';
              } else if (parentText.startsWith('✨')) {
                    el.textContent = '응용력 배우는 중';
              }
        } else if (score >= 30) {
           imageUrl = imageUrls.badgeImages["상식 뉴비"];
           if (parentText.startsWith('🎯')) {
                el.textContent = '지식 관찰자';
           } else if (parentText.startsWith('💫')) {
               el.textContent = '이해력 배우는 중';
           } else if (parentText.startsWith('✨')) {
              el.textContent = '응용력 입문';
           }
        }
        else  {
            imageUrl = imageUrls.badgeImages["아재 감성"];
            if (parentText.startsWith('🎯')) {
                  el.textContent = '아직은 초보자';
            } else if (parentText.startsWith('💫')) {
                 el.textContent = '이해력 노력 중';
            } else if (parentText.startsWith('✨')) {
                 el.textContent = '응용력 배워가는 중';
            }
          }
   const button = document.querySelector('button[onclick="showFullAnalysis()"]');
       button.textContent = '분석 완료! 🎉';
       button.classList.remove('animate-pulse');
       button.classList.add('bg-gradient-to-r', 'from-green-500', 'to-emerald-500');
     button.onclick = null;
});

        function saveResult(score, level) {
            const result = {
                score,
                level,
                date: new Date().toISOString(),
                  userId: localStorage.getItem('userId') || 'anonymous'
            };
            
            let results = JSON.parse(localStorage.getItem('quizResults') || '[]');
            results.push(result);
             if (results.length > 100) {
                results = results.slice(-100);
            }
            localStorage.setItem('quizResults', JSON.stringify(results));
            console.log('저장된 결과:', result);
            console.log('전체 결과 수:', results.length);
       }

        window.onload = displayResult;
    </script>
        
            <!-- 버킷리스트 플래너 추천 -->
            <div class="bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6 mb-6">
                <h3 class="font-bold text-purple-800 mb-2">🎯 추천 도구</h3>
                <p class="text-purple-700 mb-4">상식 능력을 키우기 위한 무료 플래너를 받아보세요!</p>
                <a href="https://coffeemania68.github.io/share/" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   class="planner-button block w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-bold text-center shadow-lg hover:shadow-xl transition-all duration-300">
                    2025 버킷리스트 플래너 받기 ✨
                </a>
            </div>
        </div>
    </div>

    <!-- 고정된 하단 버튼 -->
    <div class="fixed bottom-0 left-0 right-0 bg-white shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]">
        <div class="max-w-lg mx-auto p-4 grid grid-cols-2 gap-3">
            <button onclick="location.href='./'" class="button-hover w-full py-3 px-6 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full font-medium shadow-md hover:opacity-90">
               다시 도전! 🔄
            </button>
            <button onclick="location.href='https://coffeemania68.github.io/fortune-2025/'" class="button-hover w-full py-3 px-6 bg-gray-100 text-gray-700 rounded-full font-medium hover:bg-gray-200">
                다른 테스트 하기
            </button>
        </div>
    </div>
</body>
</html>
