<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒì‹ í€´ì¦ˆ ì±Œë¦°ì§€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'bounce-slow': 'bounce 3s infinite',
                        'wiggle': 'wiggle 1s ease-in-out infinite',
                        'fade-in': 'fadeIn 0.5s ease-out'
                    },
                    keyframes: {
                        wiggle: {
                            '0%, 100%': { transform: 'rotate(-3deg)' },
                            '50%': { transform: 'rotate(3deg)' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .progress-bar {
            transition: width 0.3s ease-in-out;
        }
        .gradient-background {
            background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-100 via-pink-50 to-blue-100">
    <!-- ì§„í–‰ë°” -->
    <div class="fixed top-0 left-0 w-full h-3 bg-gray-200 z-50">
        <div id="progress" class="progress-bar h-full bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 rounded-r-full" style="width: 0%"></div>
    </div>

    <div class="container mx-auto px-4 py-8 max-w-2xl">
       <!-- ì§ˆë¬¸ ì»¨í…Œì´ë„ˆ ë¶€ë¶„ -->
<div id="questionContainer" class="mt-8 animate-fade-in">
    <div class="text-center mb-8">
        <span class="inline-block px-4 py-2 rounded-full bg-white shadow-lg text-purple-600 font-bold animate-bounce-slow" id="questionNumber">1/20</span>
    </div>
    
    <div class="bg-white rounded-2xl p-8 shadow-lg mb-8 transform hover:scale-102 transition duration-300">
        <h2 id="questionText" class="text-xl md:text-2xl font-bold text-center leading-relaxed break-keep text-gray-800">
            ì§ˆë¬¸ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤
        </h2>
        <p id="questionContext" class="mt-4 text-center text-gray-600 text-sm md:text-base leading-relaxed break-keep">
            ë¶€ê°€ì„¤ëª…ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤
        </p>
    </div>

    <!-- ë‹µë³€ ë²„íŠ¼ ì»¨í…Œì´ë„ˆ -->
    <div class="space-y-4" id="answersContainer">
        <!-- ë‹µë³€ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
    </div>
</div>

<!-- ì¥ì‹ ìš”ì†Œë“¤ -->
<div class="fixed top-20 left-10 w-12 h-12 bg-purple-400 rounded-full opacity-50 animate-bounce-slow"></div>
<div class="fixed bottom-20 right-10 w-8 h-8 bg-pink-400 rounded-full opacity-50 animate-wiggle"></div>

<script type="module">
    import quizDataSets from './quizDataSets.js';
    
    // ì „ì—­ ë³€ìˆ˜ ì„ ì–¸
    let quizData;
    let currentQuestion = 0;
    let scores = [];
    let userScore = 0;

    // DOM ìš”ì†Œ ì°¸ì¡°
    const questionNumber = document.getElementById('questionNumber');
    const questionText = document.getElementById('questionText');
    const questionContext = document.getElementById('questionContext');
    const progress = document.getElementById('progress');
    const answersContainer = document.getElementById('answersContainer');

    function updateQuestion() {
        const current = quizData[currentQuestion];
        questionNumber.textContent = `${currentQuestion + 1}/${quizData.length}`;
        questionText.textContent = current.question;
        questionContext.textContent = current.context || '';
        progress.style.width = `${(currentQuestion / quizData.length) * 100}%`;
        
        updateAnswerButtons(current.options);
    }

    function updateAnswerButtons(options) {
        answersContainer.innerHTML = ''; // ê¸°ì¡´ ë²„íŠ¼ë“¤ ì œê±°
        
        options.forEach((option, index) => {
            const button = document.createElement('button');
            button.className = `w-full p-5 rounded-xl border-2 border-transparent hover:border-purple-400 transition-all duration-300 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold shadow-md hover:shadow-xl transform hover:-translate-y-1 answer-btn`;
            
            button.innerHTML = `
                <div class="flex items-center space-x-3">
                    <span class="text-xl">${getEmoji(index)}</span>
                    <span class="flex-1 text-left leading-relaxed break-keep">${option}</span>
                </div>
            `;
            
            button.addEventListener('click', () => {
                const current = quizData[currentQuestion];
                handleAnswer(option === current.correct ? 10 : 0);
            });
            
            answersContainer.appendChild(button);
        });
    }

    function getEmoji(index) {
        const emojis = ['âœ¨', 'ğŸ’«', 'â­', 'ğŸŒŸ'];
        return emojis[index] || 'â˜€ï¸';
    }

    function handleAnswer(score) {
        scores.push(score);
        userScore += score;
        
        if (currentQuestion < quizData.length - 1) {
            currentQuestion++;
            updateQuestion();
        } else {
            saveScoreToLocalStorage();
            window.location.href = `quiz-result.html?score=${userScore}`;
        }
    }

    function saveScoreToLocalStorage() {
        let scoresData = JSON.parse(localStorage.getItem('quizScores') || '[]');
        scoresData.push({ score: userScore, time: new Date().getTime() });
        localStorage.setItem('quizScores', JSON.stringify(scoresData));
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', () => {
        const urlParams = new URLSearchParams(window.location.search);
        const setNumber = urlParams.get('set');
        
        if (!quizDataSets[`set${setNumber}`]) {
            console.error('Invalid quiz set:', setNumber);
            return;
        }
        
        quizData = quizDataSets[`set${setNumber}`].questions;
        updateQuestion();
    });
</script>  
<style>
    /* ì¶”ê°€ ìŠ¤íƒ€ì¼ */
    .break-keep {
        word-break: keep-all; /* í•œê¸€ ë‹¨ì–´ ë‹¨ìœ„ ì¤„ë°”ê¿ˆ */
        overflow-wrap: break-word; /* ê¸´ ì˜ë¬¸ë„ ìì—°ìŠ¤ëŸ½ê²Œ ì¤„ë°”ê¿ˆ */
    }

    /* ëª¨ë°”ì¼ì—ì„œì˜ í…ìŠ¤íŠ¸ í¬ê¸° ì¡°ì • */
    @media (max-width: 640px) {
        #questionText {
            font-size: 1.25rem;
            line-height: 1.75rem;
        }
        #questionContext {
            font-size: 0.875rem;
            line-height: 1.25rem;
        }
    }

    /* ì§ˆë¬¸ ì»¨í…Œì´ë„ˆ ì• ë‹ˆë©”ì´ì…˜ */
    .question-transition {
        transition: all 0.3s ease-in-out;
    }

    /* ì§ˆë¬¸ ì»¨í…Œì´ë„ˆ ì—¬ë°± ìµœì í™” */
    .question-container {
        max-width: 100%;
        margin: 0 auto;
        padding: 1rem;
    }

    /* ê¸´ í…ìŠ¤íŠ¸ë¥¼ ìœ„í•œ ìŠ¤í¬ë¡¤ ë°©ì§€ */
    .no-scroll-container {
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 3; /* ìµœëŒ€ 3ì¤„ê¹Œì§€ í‘œì‹œ */
        -webkit-box-orient: vertical;
    }

    /* ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ ê°œì„  */
    .answer-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }

    /* ë²„íŠ¼ í´ë¦­ íš¨ê³¼ */
    .answer-btn:active {
        transform: translateY(0);
        box-shadow: 0 5px 10px rgba(0,0,0,0.1);
    }
</style>
</body>
</html>
